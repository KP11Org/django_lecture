**Лекция: Виртуальные среды Python (`venv`)**  
**Продолжительность**: 45-60 минут  

---

### **1. Что такое виртуальная среда?**  
- **Определение**: инструмент для создания изолированных сред Python для проектов, обеспечивающий разделение зависимостей и пакетов.  
- **Зачем её использовать?**  
  - Чтобы избежать конфликтов версий между проектами (например, в проекте A используется Django 4.0, в проекте B — Django 3.2).  
  - Поддерживайте чистоту глобальной установки Python.  
  - Упростите управление зависимостями и совместную работу.  

---

### **2. Основные преимущества**  
1. **Изоляция**: у каждого проекта есть свои зависимости.  
2. **Управление зависимостями**: отслеживайте точные версии пакетов.  
3. **Воспроизводимость**: используйте общие среды для согласованных настроек.  
4. **Не требуются права администратора**: установка пакетов без доступа ко всей системе.  

---

### **3. Создание виртуальной среды**  
#### **Шаг 1: Создание среды**  
- Используйте встроенный в Python модуль `venv`:  
  ```bash
  python -m venv myenv  # Замените "myenv" на имя вашей среды
  ```  
- Это создаст папку `myenv` с двоичными файлами Python и каталог `site-packages`.   

#### **Шаг 2: Активируйте среду**  
- **Windows (командная строка)**:  
  ```bash
  myenv\Scripts\activate.bat
  ```  
- **macOS/Linux**:  
  ```bash
  source myenv/bin/activate
  ```  
- **Успех**: в вашем терминале появится надпись `(myenv)`, указывающая на активацию.  

#### **Шаг 3: Деактивируйте среду**  
- Выполните:  
  ```bash
  deactivate
  ```  

---

### **4. Работа внутри виртуальной среды**  
- **Установка пакетов**:  
  ```bash
  pip install requests numpy  # Установка пакетов локально
  ```  
- **Список установленных пакетов**:  
  ```bash
  pip list
  ```  
- **Экспорт зависимостей**:  
  ```bash
  pip freeze > requirements.txt  # Сохраняем пакеты в файл
  ```  
- **Установка из `requirements.txt`**:  
  ```bash
  pip install -r requirements.txt  # Устанавливаем пакеты из файла
  ```  

---

### **5. Пример рабочего процесса**  
1. Создайте папку проекта:  
   ```bash
   mkdir my_project && cd my_project
   ```  
2. Создайте и активируйте среду:  
   ```bash
   python -m venv venv && source venv/bin/activate
   ```  
3. Установите пакеты и работайте над своим проектом.  
4. Экспортируйте зависимости, чтобы другие могли их воспроизвести:  
   ```bash
   pip freeze > requirements.txt
   ```  

---

### **6. Рекомендации**  
1. **Всегда используйте виртуальную среду**: избегайте глобальной установки пакетов.  
2. **Назовите среду `venv`**: так ее будет проще идентифицировать и добавить в `.gitignore`.  
3. **Исключите `venv` из Git**: добавьте `venv/` в `.gitignore`.  
4. **Воспроизводите среды для тестирования**: убедитесь, что ваш `requirements.txt` работает.  

---

### **7. Распространенные ошибки и способы их устранения**  
- **"Команда не найдена" после активации**:  
  - Убедитесь, что вы используете правильный путь (например, `source venv/bin/activate`, а не `source myenv/bin/activate`).  
- **Неверная версия Python**:  
  - Используйте `python3 -m venv venv`, если в вашей системе по умолчанию используется Python 2.  
- **Забыли активировать**: дважды проверьте приглашение терминала на наличие `(venv)`.  

---

### **8. Интеграция с IDE**  
- **VS Code**: автоматически обнаруживает и активирует `venv`, если он находится в корневом каталоге проекта.  
- **PyCharm**: перейдите в `Настройки > Проект > Интерпретатор Python` и выберите `venv/bin/python`.  

---

### **Домашнее задание**  
**Цель**: попрактиковаться в создании виртуальных сред и управлении ими.  

#### **Задачи**  
1. **Создайте виртуальную среду**:  
   - Назовите ее `hw_venv`.  
   - Активируйте ее и установите `pandas` и `flask`.  
2. **Экспортируйте зависимости**:  
   - Создайте файл `requirements.txt`.  
   - Деактивируйте и удалите среду.  
3. **Воспроизведите среду**:  
   - Создайте новую среду с именем `hw_venv_copy`.  
   - Используйте `requirements.txt` для установки тех же пакетов.  
4. **Дополнительное задание**:  
   - Используйте `pipenv` или `poetry` (продвинутые инструменты) для создания виртуальной среды.  

---

**Отправка**:  
- Отправьте файл `requirements.txt`.  
- Предоставьте скриншоты вашего терминала, на которых видно:  
  - активированную среду.  
  - вывод команды `pip list` после установки пакетов.  

--- 
