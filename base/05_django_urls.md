**Лекция: URL-адреса Django**  
**Продолжительность**: 60-75 минут  

---

### **1. Введение в URL-адреса Django**  
**Что такое URL-адреса в Django?**  
- **URL-адреса** (унифицированные указатели ресурсов) сопоставляют запросы пользователей с конкретными представлениями.  
- Django использует **диспетчер URL-адресов** (определенный в `urls.py`) для маршрутизации запросов на основе шаблонов.  
- Ключевые концепции: **преобразователи путей**, **регулярные выражения** и **модульность** с помощью конфигураций URL-адресов для конкретных приложений.  

**Почему URL-адреса важны**  
- Организуйте доступ к различным частям вашего приложения (например, `/blog/`, `/about/`).  
- Используйте чистые, читаемые и удобные для SEO URL-адреса.  
- Отделите структуру URL-адресов от логики представления.  

---

### **2. Базовая конфигурация URL-адресов**  
#### **urls.py** на уровне проекта  
- Корневая конфигурация URL (определена в `myproject/urls.py`).  
- Маршрутизирует запросы к URL-адресам приложений с помощью `include()`.  
```python  
from django.urls import path, include  

urlpatterns = [  
    path('admin/', admin.site.urls),  
    path('blog/', include('blog.urls')),  # Делегирование URL-адресам приложения blog  
]  
```  

#### **urls.py** на уровне приложения  
- Создайте файл `urls.py` внутри вашего приложения (например, `blog/urls.py`).  
```python  
from django.urls import path  
from . import views  

urlpatterns = [  
    path('', views.post_list, name='post_list'),  
    path('post/<int:post_id>/', views.post_detail, name='post_detail'),  
]  
```   

---

### **3. Преобразователи путей и регулярные выражения**  
#### **Преобразователи путей**  
- упрощают распространенные шаблоны (без использования регулярных выражений):  
  - `int`: целые числа (например, `post/3/`).  
  - `str`: строки (без `/`).  
  - `slug`: строки, удобные для URL (буквы, цифры, дефисы).  
  - `uuid`: универсальные уникальные идентификаторы.  

**Пример**:  
```python  
path('post/<int:post_id>/<slug:slug>/', views.post_detail, name='post_detail')  
```  
- Захватывает `post_id` как целое число и `slug` как строку.  

#### **Регулярные выражения (продвинутый уровень)**  
- Используйте `re_path()` для сложных шаблонов:  
```python  
from django.urls import re_path  

re_path(r'^archive/(?P<year>[0-9]{4})/$', views.archive_by_year),  
```   

---

### **4. Именованные URL-адреса и обратное разрешение**  
**Зачем именовать URL-адреса?**  
- Избегайте жесткого кодирования URL-адресов в шаблонах/представлениях.  
- Упростите рефакторинг.  

**Использование**:  
1. **В `urls.py`**:  
   ```python  
   path('about/', views.about, name='about'),  
   ```  
2. **В шаблонах**:  
   ```html  
   <a href="{% url 'about' %}">О нас</a>  
   ```  
3. **В представлениях**:  
   ```python  
   from django.urls import reverse  
   redirect_url = reverse('post_detail', args=[1, 'мой-первый-пост'])  
   ```  

---

### **5. Пространства имён в URL-адресах**  
- Предотвращает конфликты, когда несколько приложений используют одни и те же имена URL-адресов.  
- **Шаг 1**: Определите `app_name` в файле `urls.py` приложения:  
  ```python  
  app_name = 'blog'  # Пространство имен  
  ```  
- **Шаг 2**: Используйте в шаблонах/представлениях:  
  ```html  
  <a href="{% url 'blog:post_detail' post.id %}">Подробнее</a>  
  ```  

---

### **6. Обработка ошибок**  
- Настройте страницы ошибок (404, 500), добавив обработчики в `urls.py`:  
```python  
handler404 = 'myapp.views.custom_404_view'  
handler500 = 'myapp.views.custom_500_view'  
```  
- Создайте соответствующие шаблоны: `404.html `, `500.html `.  

---

### **7. Рекомендации**  
1. **Сохраняйте модульность URL-адресов**: Используйте `include()` для маршрутов, зависящих от приложения.  
2. **Используйте именованные URL-адреса**: Упростите обслуживание и избегайте жесткого кодирования.  
3. **Проверьте параметры**: Убедитесь, что параметры URL-адреса соответствуют ожидаемым типам.  
4. **Порядок имеет значение**: Django обрабатывает шаблоны URL сверху вниз.  

---

### **Задание на дом**  
**Цель**: создать многостраничный сайт Django со структурированными URL.  

#### **Задачи**  
1. **Настройка проекта**:  
   - Создайте проект `mysite` и два приложения: `pages` (для статических страниц) и `articles`.  

2. **Определение URL**:  
   - **На уровне проекта**: перенаправьте `/articles/` на приложение `articles`.   
   - **На уровне приложения**:  
     - `pages`: URL-адреса для `/about/`, `/contact/` (используйте именованные URL-адреса).   
     - `articles`: URL-адреса для отображения списка статей (`/articles/`) и подробностей (`/articles/<int:article_id>/`).   

3. **Обработка ошибок**:  
   - Создайте пользовательские шаблоны `404.html` и `500.html`.  
   - Добавьте обработчики в `urls.py`.  

4. **Бонус**:  
  - Добавьте пространство имён для приложения `articles`.   
  - Используйте поле `slug` в URL-адресах статей (например, `/articles/1/my-article/`).   

#### **Отправка**:  
- Репозиторий GitHub с кодом.  
- Скриншоты:  
  - пользовательской страницы 404.  
